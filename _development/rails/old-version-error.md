---
layout: posts
title:  "오래된 루비 버전을 사용할 경우 발생하는 문제"
date:   2020-03-26 14:00:00 - 0900
categories: [ rails ]
sidebar:
  nav: "posts"
---

얼마전 입사 4년만에 업무용 맥 시스템을 거의 새것으료 교체받았다.<br>
기존에 사용하던 맥미니는 모하비로의 업그레이드도 되지 않는 구형이었지만 개발하는데 느린것을 제외하고는 문제가 없었다.<br>
하지만 새로운 아이맥에 개발환경을 셋팅하다보니 몇가지 문제점이 발생하여 기록을 남긴다.<br>

사내 QA 용도의 운영툴을 *Rails* 로 개발 & 운영중이었는데 개발된지 오래되다 보니 사용하는 레일즈와 루비 버전이 많이 낮았다.<br>
특정하자면 루비의 경우는 1.9.3 버전을 사용하고 있었는데, 내 맥 os 는 카탈리나였고 db 는 mysql 8 버전으로 최신버전을 유지중이었다.<br>
여차저차 bundle install 까지 마치고 rails server 커맨드로 서버를 실행하려 했지만, 젬이 로드되지 않았다는 에러등과 함께 셧다운되었다.<br>
삽질을통해 찾은 결론은 아래와 같다.

*구버전의 ruby 는 해당 버전에서 지원하는 gem 의 버전에 한계가 있고, gem 버전에 따라 지원되는 외부 환경에 제약이 있다.* 는 것이다.<br>
rails server 가 되지 않는 이유는, ruby 구버전이 지원하는 mysql2 gem 이 최신의 mysql 8 을 지원하지 못해 발생하는 것이었다.<br>
한참동안 시간만 날리며 삽질을 한 것이다... 개발 또는 서비스 환경을 일관되게 유지하는것이 얼마나 중요한지를 뼈져리게 느끼게 되었다.<br>